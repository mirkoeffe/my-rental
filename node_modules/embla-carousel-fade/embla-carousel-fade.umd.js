!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(n="undefined"!=typeof globalThis?globalThis:n||self).EmblaCarouselFade=t()}(this,(function(){"use strict";function n(n,t,e){return Math.min(Math.max(n,t),e)}function t(n){return"number"==typeof n&&!isNaN(n)}function e(e={}){const o=1,i=0;let r,s,l,c,a=[],f=0,d=0,u=0,p=!1;function g(){m(r.selectedScrollSnap(),o)}function y(){p=!1}function E(){p=!1,f=0,d=0}function S(){const n=r.internalEngine().scrollBody.duration();d=n?0:o,p=!0,n||g()}function h(n){const{scrollSnaps:e,location:o,target:i}=r.internalEngine();!t(n)||a[n]<.5||(o.set(e[n]),i.set(o))}function m(t,e){r.scrollSnapList().forEach(((s,l)=>{const c=Math.abs(e),d=a[l],g=l===t,y=n(g?d+c:d-c,i,o);a[l]=y;const E=g&&p,S=r.previousScrollSnap();E&&(a[S]=1-y),g&&function(n,t){const{index:e,dragHandler:o,scrollSnaps:i}=r.internalEngine(),s=o.pointerDown(),l=1/(i.length-1);let c=n,a=s?r.selectedScrollSnap():r.previousScrollSnap();if(s&&c===a){const n=-1*Math.sign(f);c=a,a=e.clone().set(a).add(n).get()}const d=a*l,p=(c-a)*l;u=d+p*t}(t,y),function(n){const t=r.internalEngine().slideRegistry[n],{scrollSnaps:e,containerRect:o}=r.internalEngine(),s=a[n];t.forEach((t=>{const l=r.slideNodes()[t].style,c=parseFloat(s.toFixed(2)),a=c>i,f=function(n){const{axis:t}=r.internalEngine();return`translate${t.scroll.toUpperCase()}(${t.direction(n)}px)`}(a?e[n]:o.width+2);a&&(l.transform=f),l.opacity=c.toString(),l.pointerEvents=s>.5?"auto":"none",a||(l.transform=f)}))}(l)}))}function b(){const{dragHandler:n,index:t,scrollBody:e}=r.internalEngine(),o=r.selectedScrollSnap();if(!n.pointerDown())return o;const i=Math.sign(e.velocity()),s=Math.sign(f),l=t.clone().set(o).add(-1*i).get();return i&&s?s===i?l:o:null}const v=n=>{const{dragHandler:e,scrollBody:i}=n.internalEngine(),r=e.pointerDown(),l=i.velocity(),c=i.duration(),u=b(),p=!t(u);if(r){if(!l)return;f+=l,d=Math.abs(l/s),h(u)}if(!r){if(!c||p)return;d+=(o-a[u])/c,d*=.68}p||m(u,d)};function x(){const{target:n,location:e}=r.internalEngine(),o=n.get()-e.get(),i=Math.abs(o)>=1,s=b(),l=!t(s);return v(r),!l&&!i&&a[s]>.999}function M(){return u}return{name:"fade",options:e,init:function(t){r=t;const e=r.selectedScrollSnap(),{scrollBody:f,containerRect:d,axis:u}=r.internalEngine(),h=u.measureSize(d);s=n(.75*h,200,500),p=!1,a=r.scrollSnapList().map(((n,t)=>t===e?o:i)),l=f.settled,c=r.scrollProgress,f.settled=x,r.scrollProgress=M,r.on("select",S).on("slideFocus",g).on("pointerDown",E).on("pointerUp",y),function(){const{translate:n,slideLooper:t}=r.internalEngine();n.clear(),n.toggleActive(!1),t.loopPoints.forEach((({translate:n})=>{n.clear(),n.toggleActive(!1)}))}(),g()},destroy:function(){const{scrollBody:n}=r.internalEngine();n.settled=l,r.scrollProgress=c,r.off("select",S).off("slideFocus",g).off("pointerDown",E).off("pointerUp",y),r.slideNodes().forEach((n=>{const t=n.style;t.opacity="",t.transform="",t.pointerEvents="",n.getAttribute("style")||n.removeAttribute("style")}))}}}return e.globalOptions=void 0,e}));
